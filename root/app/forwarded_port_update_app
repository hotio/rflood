# shellcheck shell=bash
until pidof rtorrent > /dev/null; do   
    sleep 1
done
until xmlrpc localhost:5000 system.client_version > /dev/null; do
    echo "[WRN] [$(date '+%Y-%m-%d %H:%M:%S')] [RTORRENT] Application not yet ready!"
    sleep 1
done
xmlrpc localhost:5000 network.port_random.set "s/" "0" > /dev/null
xmlrpc localhost:5000 network.port_range.set "s/" "${port}-${port}" > /dev/null
echo "[INF] [$(date '+%Y-%m-%d %H:%M:%S')] [RTORRENT] Updated forwarded port to [${port}]."
